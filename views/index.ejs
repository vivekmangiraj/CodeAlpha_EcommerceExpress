<h1 class="mb-4">Products</h1>
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
  <% products.forEach(p => { %>
    <div class="col">
      <div class="card h-100 shadow border-0 product-card">
        <div class="ratio ratio-4x3">
          <% if (p.image) { %>
            <img src="/images/<%= p.image %>" class="card-img-top img-cover" alt="<%= p.name %>">
          <% } else { %>
            <div class="d-flex align-items-center justify-content-center bg-secondary text-white">
              No Image
            </div>
          <% } %>
        </div>
        <div class="card-body d-flex flex-column">
          <h5 class="card-title"><%= p.name %></h5>
          <p class="card-text flex-grow-1 text-muted"><%= (p.description||'').slice(0,80) %>â€¦</p>
          <div class="d-flex justify-content-between align-items-center mt-3">
            <span class="fw-bold fs-5 text-primary">$<%= p.price.toFixed(2) %></span>
            <div>
              <!-- Details button: use a solid outline-secondary -->
              <a href="/product/<%= p._id %>" 
                 class="btn btn-sm btn-outline-secondary me-1">
                <i class="fas fa-eye me-1"></i>Details
              </a>
              <!-- Add-to-cart: use solid primary -->
              <form class="d-inline" method="post" action="/cart/add/<%= p._id %>">
                <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                <button class="btn btn-sm btn-primary">
                  <i class="fas fa-cart-plus me-1"></i>Add
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% }) %>
</div>
